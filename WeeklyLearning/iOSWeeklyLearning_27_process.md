# iOSæ‘¸é±¼å‘¨æŠ¥ ç¬¬äºŒåä¸ƒæœŸ

![](https://gitee.com/zhangferry/Images/raw/master/gitee/iOSæ‘¸é±¼å‘¨æŠ¥æ¨¡æ¿.png)

### æœ¬æœŸæ¦‚è¦

> * è¯é¢˜ï¼šè·Ÿ RunsCode èŠèŠç¼–ç¨‹å’Œå…´è¶£çˆ±å¥½ï¼Œä»¥åŠå¦‚ä½•åœ¨ 1minä¹‹å†…å¤åŸé­”æ–¹ğŸ˜ã€‚
> * Tipsï¼šiOS è¯†åˆ«è™šæ‹Ÿå®šä½è°ƒç ”ï¼›ä½¿ç”¨ App Store Connect API Key è§£å†³ Fastlane åŒé‡éªŒè¯é—®é¢˜ã€‚
> * é¢è¯•æ¨¡å—ï¼š
> * ä¼˜ç§€åšå®¢ï¼šå…³äº Combine çš„ç›¸å…³æ–‡ç« ã€‚
> * å­¦ä¹ èµ„æ–™ï¼š
> * å¼€å‘å·¥å…·ï¼š

## æœ¬æœŸè¯é¢˜

[@zhangferry](https://zhangferry.com)ï¼šè¿™æœŸå‚ä¸è®¿è°ˆçš„å¯¹è±¡æ˜¯æ‘¸é±¼å‘¨æŠ¥çš„å¦ä¸€ä¸ªç¼–è¾‘ï¼š[RunsCode](https://github.com/RunsCode)ï¼ŒRunsCode åœ¨æˆ‘çœ‹æ¥æ˜¯ä¸€ä¸ªéå¸¸é…·çš„äººã€‚è¿™ä¸ªé…·æ¥è‡ªäºä»–å¾ˆå¼ºçš„å­¦ä¹ èƒ½åŠ›å’Œä¸ªäººè¦æ±‚ï¼Œç¼–ç¨‹å’Œå…´è¶£çˆ±å¥½éƒ½èƒ½è¢«ä»–ç©å‡ºèŠ±æ¥ã€‚ä¸‹é¢é€šè¿‡å‡ ä¸ªé—®é¢˜ï¼Œä¸€èµ·äº†è§£ä¸‹ä»–ã€‚

zhangferryï¼šç®€å•ä»‹ç»ä¸‹è‡ªå·±å§ã€‚

> Helloï¼Œå¤§å®¶å¥½æˆ‘æ˜¯ RunsCodeï¼Œç›®å‰å°±èŒäº Helloå‡ºè¡Œï¼Œåæ ‡æ­å·ã€‚
>
> å°æ—¶å€™å› ä¸ºæ²‰è¿·äºç”µè„‘æ¸¸æˆï¼Œæ¯•ä¸šåå…¥å‘åšæ‰‹æ¸¸ï¼Œåæ¥æœºç¼˜å·§åˆä¹‹ä¸‹ç»“è¯† iOSï¼Œä»æ­¤ç§»æƒ…åˆ«æ‹äº†ï¼Œè·Ÿ iOS ç›¸çˆ±ç›¸æ€è‡³ä»Šã€‚

zhangferryï¼šä½ çš„å­¦ä¹ èŒƒå›´æ¯”è¾ƒå¹¿ï¼Œå®‰å“ï¼ŒRubyï¼ŒApplescript éƒ½æœ‰å†™è¿‡ï¼Œä½ æ˜¯åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹æ¥è§¦ä¸€é—¨æ–°è¯­è¨€çš„ï¼Ÿå­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œé¦–å…ˆåº”è¯¥å…³æ³¨å“ªéƒ¨åˆ†å†…å®¹ï¼Ÿ

> å› ä¸ºä¹‹å‰åšçš„ cpp æ¸¸æˆè¦åšç§»åŠ¨ç«¯è·¨å¹³å°ç§»æ¤å¯¹æ¥ç§»åŠ¨æ”¯ä»˜ SDKï¼Œè¢«è¿«å­¦äº† Android å’Œ iOSï¼Œä½†æ˜¯è¿˜æ˜¯è¢«iOS çš„çº¯ç²¹ç»™å¸å¼•äº†ã€‚åæ¥åœ¨15å¹´æ iOS çš„è¿‡ç¨‹ä¸­æ¥äº†ä¸€ä¸ª CSDN å½“æ—¶å‰åçš„å¤§ç¥å½“æˆ‘ä»¬é¢†å¯¼ï¼Œå¼€æ‹“è§†é‡å­¦ä¹ Swift å’Œ Rubyï¼Œå› ä¸ºä»–è¯´ Swift å€Ÿé‰´äº†å¾ˆå¤š Ruby çš„ç‰¹æ€§ï¼Œå†åŠ ä¸Š CocoaPods ä¹Ÿæ˜¯ Ruby å†™çš„ï¼Œä¹Ÿå°±ç¨ç¨å­¦ä¹ äº†ä¸€ä¸‹ã€‚AppleScript ä¹Ÿæ˜¯è¿™ä¸ª CSDN å¤§ç¥æé†’çš„æ Mac è‡ªåŠ¨åŒ–ï¼Œåæ¥ä¹Ÿæ˜¯ä¸€å‘ä¸å¯æ”¶æ‹¾ã€‚
>
> è¿™äº›è¯­è¨€å¯¹æˆ‘è€Œè¨€ä»–ä»¬å…±æ€§æ˜¯è®©æˆ‘å†™èµ·æ¥å¾ˆå¼€å¿ƒï¼Œå°±åƒé‚£ç§å°å­©å­çœ‹åˆ°å¥½åƒçš„é‚£ç§æ„Ÿè§‰ï¼ˆä¸»è¦è¯´ Swift å’Œ Rubyï¼‰
> å…¶å®å­¦è¯­è¨€éƒ½æ˜¯æœ‰é’ˆå¯¹çš„å­¦ä¹ ï¼Œä¸åŒçš„è¯­è¨€éƒ½æ˜¯æœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸï¼Œæ¯”å¦‚è¯´æˆ‘è¦ç”¨ Ruby å†™ä¸€ä¸ªiOS Appï¼Œè¿™å°±æœ‰ç‚¹è¿‡åˆ†äº†ï¼Œç›¸æ¯” OC/Swift è¿™å°±ä¸æ˜¯å¾ˆé€‚åˆäº†ï¼Œè™½è¯´æœ‰ç‚¹è¿‡åˆ†ï¼Œä½†æ˜¯çœŸçš„æœ‰äººè¿™ä¹ˆå¹²äº†ï¼Œå¯ä»¥äº†è§£ä¸‹ [RubyMotion](http://www.rubymotion.com/ "RubyMotion")ï¼ŒçœŸæ˜¯æå®¢å•Šã€‚
>
> ä¸ªäººè§‰å¾—å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€é™¤äº†ä¸€å¼€å§‹æŒæ¡åŸºæœ¬çš„è¯æ³•è¯­æ³•ä¹‹å¤–ï¼Œæ…¢æ…¢çš„ä½ å°±ä¼šå‘ç°è¿™ä¸ªè¯­è¨€è·Ÿä½ æœ‰æ²¡æœ‰å…±é¸£ï¼Œä½ å°±ä¼šå‘ç°ä½ çš„æ€è·¯è·Ÿå®ƒçš„å¤„ç†é€»è¾‘æ˜¯ä¸æ˜¯å¾ˆå¥‘åˆï¼Œå°±åƒå¤§å®¶éƒ½å–œæ¬¢è„šæœ¬ Python æˆ‘å´æ›´å–œæ¬¢ Rubyï¼Œè¿™ä¸»è¦æ˜¯Ruby çš„å¤„ç†é€»è¾‘è·Ÿæˆ‘å¾ˆå¥‘åˆï¼Œå°±æ˜¯åŒæ ·çš„å±•ç¤ºä½ ç”¨å¾·ç›ä¹ æƒ¯ï¼Œæˆ‘å´ç”¨å•å¸ƒæ›´åŠ ä¹ æƒ¯ã€‚

zhangferryï¼šå¬è¯´ä½ ä¹’ä¹“çƒå’Œé­”æ–¹éƒ½ç©çš„å¾ˆå¥½ï¼Œè¿™äº›ä¸œè¥¿çš„å­¦ä¹ è·Ÿç¼–ç¨‹æœ‰æ²¡æœ‰ä»€ä¹ˆå…±æ€§å‘¢ï¼Ÿæˆ‘ä¹‹å‰ä¹Ÿç€è¿·è¿‡ä¸€æ®µæ—¶é—´é­”æ–¹ï¼Œä½†æœ€å¿«ä¹Ÿè¦ 2min ä»¥ä¸Šï¼Œå¬è¯´ä½ çš„è®°å½•æ˜¯ 15sã€‚ç”±ä¸ä¼šåˆ°ä¼šå†åˆ°ç†Ÿç»ƒæ˜¯ç›¸å¯¹ç®€å•çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬äººéƒ½èƒ½åšåˆ°ï¼Œä½†å†å¾€ä¸Šçªç ´å°±å¾ˆéš¾äº†ã€‚å°±é­”æ–¹æ¥è¯´ï¼Œ1min å¯¹æˆ‘æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¤§çš„çªç ´äº†ï¼Œå¦‚æœè¦è¾¾åˆ°è¿™ä¸€æ­¥éœ€è¦åšå“ªäº›äº‹æƒ…å‘¢ï¼Ÿ

> ä¹’ä¹“çƒä¼šä¸€ç‚¹è¯·è¿‡æ•™ç»ƒä¸“é—¨è®­ç»ƒè¿‡åŸºç¡€æŠ€èƒ½ï¼Œä¸èƒ½è¯´ç©çš„å¾ˆå¥½ï¼Œè·Ÿå°åŒºå¤§çˆ·æ‰“çƒæœ‰æ—¶å€™ç»å¸¸ç¿»è½¦çš„ï¼Œå°¤å…¶æ‰“é•¿èƒ¶ç¿»è½¦ä¸å°‘ï¼Œå“......
>
> é­”æ–¹è¿™ä¸ªå§ï¼Œå°±æ˜¯æ¯”ä¸€èˆ¬å¤åŸçš„ç¨å¾®å¿«ä¸€ç‚¹ï¼Œä¸‰é˜¶æ­¢æ­¥ CFOPã€‚
>
> è·Ÿç¼–ç¨‹çš„å…±æ€§ï¼šå…´è¶£ç¬¬ä¸€ï¼Œ ç„¶åå°±æ˜¯åšæŒï¼Œç”¨æ­£ç¡®çš„æ–¹æ³•åˆ»æ„ç»ƒä¹ å°±æ˜¯äº†ï¼ˆé«˜æ‰‹éƒ½æ˜¯å¯‚å¯çš„ï¼‰ã€‚
>
> ä¸€åˆ†é’Ÿè¿˜åŸä¸‰é˜¶é­”æ–¹æ¥è¯´ï¼Œå­¦ä¼šä¸ƒæ­¥è¿˜åŸæ³•ï¼Œç„¶ååœ¨è‹¦ç»ƒä¸€ä¸ªç¤¼æ‹œï¼Œæ¯å¤©ç»ƒä¹ ä¸¤ä¸ªå°æ—¶åº”è¯¥å°±å·®ä¸å¤šäº†ã€‚å½“ç„¶æŒæ¡æ­£ç¡®æ‰‹æ³•çš„å¤©èµ‹å‹é€‰æ‰‹ä¹Ÿè®¸åªè¦ä¸¤ä¸‰å¤©ã€‚
>
> ç„¶åæœ€é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œä¹°ä¸ªå¥½é­”æ–¹ï¼Œ ä¹°ä¸ªå¥½é­”æ–¹ï¼Œ ä¹°ä¸ªå¥½é­”æ–¹ï¼ï¼ï¼
> åƒä¸‡ä¸è¦ä¹°è·¯è¾¹æ‘Šåå—é’±é‚£ç§å•Šï¼Œé‚£ç§å®¹æ˜“å¡ä½æˆ–è€… POPï¼ˆå°±æ˜¯çˆ†ç‚¸å¼€äº†ï¼‰ï¼ŒåŠå…¶æ‰“å‡»è‡ªä¿¡ï¼Œè¿‡æ¥äººè¡€çš„æ•™è®­ã€‚
>
> æ€ä¹ˆçš„ä¹Ÿå¾—ä¸‰åå—èµ·æ­¥ï¼Œå›½ç”²ï¼Œå­¤é¸¿ï¼Œåœ£æ‰‹è¿™ç§å§ã€‚

zhangferryï¼šå­¦ä¹ å¾ˆå¤šæ—¶å€™å¹¶ä¸æ˜¯æœ‰è¶£çš„ï¼Œè¯¥å¦‚ä½•ä¿æŒå­¦ä¹ çƒ­æƒ…ï¼Ÿ

> è¿™ä¸ªæˆ‘ä¸çŸ¥é“æ€ä¹ˆå›ç­”ï¼Œæˆ–è®¸æ˜¯å¥½å¥‡ï¼Œæˆ–è®¸æ˜¯ç„¦è™‘ï¼Œæˆ–è®¸æ˜¯çˆ±å¥½å…´è¶£ã€‚æˆ‘åªçŸ¥é“æ˜¯è¿™ä¸‰ç‚¹æ”¯é…äº†æˆ‘ã€‚è¿˜æœ‰å°±æ˜¯æˆ‘åªåšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ï¼Œæˆ‘ä»ä¸è·Ÿé£ï¼Œè·Ÿé£å®¹æ˜“è¿·å¤±è‡ªå·±ï¼Œé€‚åˆåˆ«äººçš„ä¸ä¸€å®šé€‚åˆè‡ªå·±ã€‚
>
> ä¸»è¦è¿˜æ˜¯è¦åšæŒï¼ŒåšæŒä¸‹å»èƒ½è®©äººæ›´åšå®šã€‚æ—¶é—´é•¿äº†ä½ å°±ä¹ æƒ¯å­¦ä¹ äº†ï¼Œå¦‚æœçªç„¶ä¸€ä¸‹å­ä½ ä¸å­¦ä¹ ï¼Œä½ æ˜¯ä¸æ˜¯éƒ½ä¼šæ„Ÿåˆ°ç©ºè™šã€ç„¦è™‘å’Œå†…ç–šå§ï¼Œå“ˆå“ˆå“ˆã€‚
>

zhangferryï¼šè¯´ä¸€ä¸ªæœ€è¿‘çš„æ€æƒ³æ„Ÿæ‚Ÿå§ã€‚

> æå‡ç”Ÿæ´»å¹¸ç¦æ„Ÿè¿˜æ˜¯è¦ç»ˆèº«å­¦ä¹ ï¼Œä¸ä»…é™äºå·¥ä½œæŠ€èƒ½ï¼Œå…¶ä»–ä¸€åˆ‡éƒ½å¯ä»¥ã€‚

## å¼€å‘Tips

æ•´ç†ç¼–è¾‘ï¼š[FBYå±•è²](https://github.com/fanbaoying)ã€[zhangferry](https://zhangferry.com)

### iOS è¯†åˆ«è™šæ‹Ÿå®šä½è°ƒç ”

#### å‰è¨€

æœ€è¿‘ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæœ‰é‡åˆ°æˆ‘ä»¬çš„é¡¹ç›® app å®šä½è¢«ç¯¡æ”¹çš„æƒ…å†µï¼Œåœ¨ `android` ç«¯è¡¨ç°çš„å°¤ä¸ºæ˜æ˜¾ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§é»‘äº§ä½¿ç”¨è™šæ‹Ÿå®šä½è–…ç¾Šæ¯›ï¼Œ`iOS` ä¹Ÿä¸å¾—ä¸è¿›è¡Œè™šæ‹Ÿå®šä½çš„è§„é¿ã€‚

#### ç¬¬ä¸€ç§ï¼šä½¿ç”¨è¶Šç‹±æ‰‹æœº

ä¸€èˆ¬ app ç”¨æˆ·å­˜åœ¨ä½¿ç”¨è¶Šç‹±è‹¹æœæ‰‹æœºçš„æƒ…å†µï¼Œä¸€èˆ¬å¯ä»¥æ¨æ–­ç”¨æˆ·çš„è¡Œä¸ºå­˜åœ¨è–…ç¾Šæ¯›çš„å«Œç–‘ï¼ˆä¹Ÿæœ‰ app è¢«ç«å“å…¬å¸åšé€†å‘åˆ†æçš„å¯èƒ½ï¼‰ï¼Œå› ä¸ºä¹°ä¸€éƒ¨è¶Šç‹±çš„æ‰‹æœºæ¯”ä¹°ä¸€éƒ¨æ­£å¸¸çš„æ‰‹æœºæœ‰éš¾åº¦ï¼Œä¸”åœ¨ç³»ç»Ÿå‡çº§å’Œ `appstore` çš„ä½¿ç”¨ä¸Šï¼Œå‡ä¸å¦‚æ­£å¸¸æ‰‹æœºï¼Œæœ¬äººæ›¾ç»æµ…æµ…çš„æ¥è§¦çš®æ¯›çŸ¥è¯†é€šè¿‡è¶Šç‹± `iPhone5s` è¿›è¡Œçš„ app é€†å‘ã€‚

**ä»£ç å®ç°**

```swift
/// åˆ¤æ–­æ˜¯å¦æ˜¯è¶Šç‹±è®¾å¤‡
/// - Returns: true è¡¨ç¤ºè®¾å¤‡è¶Šç‹±
func isBrokenDevice() -> Bool {

    var isBroken = false

    let cydiaPath = "/Applications/Cydia.app"

    let aptPath = "/private/var/lib/apt"

    if FileManager.default.fileExists(atPath: cydiaPath) {
        isBroken = true
    }

    if FileManager.default.fileExists(atPath: aptPath) {
        isBroken = true
    }

    return isBroken
}
```

#### ç¬¬äºŒç§ï¼šä½¿ç”¨çˆ±æ€åŠ©æ‰‹

å¯¹äºä½¿ç”¨è™šæ‹Ÿå®šä½çš„åœºæ™¯ï¼Œå¤§å¤šåº”è¯¥æ˜¯å¸æœºæˆ–å¯¹æ¥äººå‘˜æ‰“å¡äº†ã€‚è€Œåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå°±å¯èƒ½å‚¬ç”Ÿäº†ä¸€æ‰¹ä¸“é—¨ä»¥ä½¿ç”¨è™šæ‹Ÿå®šä½è¿›è¡Œæ‰“å¡è–…ç¾Šæ¯›çš„é»‘äº§ã€‚å¯¹äºè‹¹æœæ‰‹æœºï¼Œç›®å‰è€Œè¨€ï¼Œèƒ½å¤Ÿå¾ˆå¯ä»¥çš„å®ç°çš„ï¼Œå½“æ•°çˆ±æ€åŠ©æ‰‹çš„è™šæ‹Ÿå®šä½åŠŸèƒ½äº†ã€‚

**ä½¿ç”¨æ­¥éª¤ï¼š** ä¸‹è½½çˆ±æ€åŠ©æ‰‹ mac å®¢æˆ·ç«¯ï¼Œè¿æ¥è‹¹æœæ‰‹æœºï¼Œå·¥å…·ç®±ä¸­ç‚¹å‡»è™šæ‹Ÿå®šä½ï¼Œå³å¯åœ¨åœ°å›¾ä¸Šé€‰å®šä½ï¼Œç„¶åç‚¹å‡»ä¿®æ”¹è™šæ‹Ÿå®šä½å³å¯å®ç°ä¿®æ”¹åœ°å›¾çš„å®šä½ä¿¡æ¯ã€‚

**åŸç†ï¼š** åœ¨æœªè¶Šç‹±çš„è®¾å¤‡ä¸Šé€šè¿‡ç”µè„‘å’Œæ‰‹æœºè¿›è¡Œ `USB` è¿æ¥ï¼Œç”µè„‘é€šè¿‡ç‰¹æ®Šåè®®å‘æ‰‹æœºä¸Šçš„ `DTSimulateLocation` æœåŠ¡å‘é€æ¨¡æ‹Ÿçš„åæ ‡æ•°æ®æ¥å®ç°è™šå‡å®šä½ï¼Œç›®å‰ `Xcode` ä¸Šå†…ç½®ä½ç½®æ¨¡æ‹Ÿå°±æ˜¯å€ŸåŠ©è¿™ä¸ªæŠ€æœ¯æ¥å®ç°çš„ã€‚

**è¯†åˆ«æ–¹å¼**

ä¸€ã€é€šè¿‡å¤šæ¬¡è®°å½•çˆ±æ€åŠ©æ‰‹çš„è™šæ‹Ÿå®šä½çš„æ•°æ®å‘ç°ï¼Œå…¶è™šæ‹Ÿçš„å®šä½ä¿¡æ¯çš„ç»çº¬åº¦çš„é«˜åº¦æ˜¯ä¸º 0 ä¸”ç»çº¬åº¦çš„æ•°æ®ä½æ•°ä¹Ÿæ˜¯å€¼å¾—è€ƒç©¶çš„ã€‚

äºŒã€æŠŠå®šä½åçš„æ•°æ®çš„ç»çº¬åº¦ä¸Šä¼ ç»™åå°ï¼Œåå°å†æ ¹æ®æ”¶åˆ°çš„ç»çº¬åº¦è·å–è¯¦ç»†çš„ç»çº¬åº¦ä¿¡æ¯ï¼Œå¯¹å¸æœºçš„é™¤ç»çº¬åº¦ä»¥å¤–çš„åœ°ç†ä¿¡æ¯è¿›è¡Œæ·±åº¦æ¯”è¾ƒï¼Œä¼˜å…ˆæ¯”è¾ƒ `altitude`ã€`horizontalAccuracy`ã€`verticalAccuracy` å€¼ï¼Œæ ¹æ®å€¼æ˜¯å¦ç›¸ç­‰è¿›è¡Œæƒè¡¡åç¡®å®šã€‚

ä¸‰ã€å…·ä½“è¯†åˆ«æµç¨‹

* é€šè¿‡è·å–å…¬ç½‘ `ip`ï¼Œå¤§æ¦‚å†é€šè¿‡æ¥å£æ ¹æ® `ip` åœ°å€å¯è·å–å¤§æ¦‚çš„ä½ç½®ï¼Œä½†è¯¯å·®èŒƒå›´æœ‰ç‚¹å¤§ã€‚
* é€šè¿‡ `Wi-Fi` çƒ­ç‚¹æ¥è¯»å– `app` ä½ç½®
* åˆ©ç”¨ `CLCircularRegion` è®¾å®šåŒºåŸŸä¸­å¿ƒçš„æŒ‡å®šç»çº¬åº¦å’Œå¯è®¾å®šåŠå¾„èŒƒå›´ï¼Œè¿›è¡Œç›‘å¬ã€‚
* é€šè¿‡ `IBeacon` æŠ€æœ¯ï¼Œä½¿ç”¨ `CoreBluetooth` æ¡†æ¶ä¸‹çš„ `CBPeripheralManager` å»ºç«‹ä¸€ä¸ªè“ç‰™åŸºç«™ã€‚è¿™ç§å®šä½ç›´æ¥æ˜¯ç«¯å¯¹ç«¯çš„ç›´æ¥å®šä½ï¼Œçœå»äº† `GPS` çš„å«æ˜Ÿå’Œèœ‚çªæ•°æ®çš„åŸºç«™é€šä¿¡ã€‚

å››ã€iOSé˜²é»‘äº§è™šå‡å®šä½æ£€æµ‹æŠ€æœ¯ æ–‡ç« çš„æœ«å°¾é™„çš„è§£æ³•æœ¬äººæœ‰å°è¯•è¿‡ï¼Œä¸€å±‚ä¸€å±‚é€šè¿‡ kvc è¯»å– CLLocation çš„ _internal çš„ fLocationï¼Œåªèƒ½è¯»å–åˆ°åˆ°æ­¤ã€‚

å‚è€ƒï¼š[iOS è¯†åˆ«è™šæ‹Ÿå®šä½è°ƒç ”](https://mp.weixin.qq.com/s/ZbZ4pFzzyfrQifmLewrxsw "iOS è¯†åˆ«è™šæ‹Ÿå®šä½è°ƒç ”")

### Fastlane ä½¿ç”¨ App Store Connect API Key è§£å†³åŒé‡éªŒè¯é—®é¢˜

ç°åœ¨ç”³è¯·çš„ AppleId éƒ½æ˜¯è¦æ±‚å¿…é¡»è¦æœ‰åŒé‡éªŒè¯çš„ï¼Œè¿™åœ¨å¤„ç† CI é—®é¢˜æ—¶é€šå¸¸ä¼šå¼•æ¥éº»çƒ¦ï¼Œä¹‹å‰çš„è§£å†³æ–¹æ¡ˆä½¿ç”¨`FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD` å’Œ `FASTLANE_SESSION`ï¼Œä½† `FASTLANE_SESSION` å…·æœ‰æ—¶æ•ˆæ€§ï¼Œæ¯è¿‡ä¸€ä¸ªæœˆå°±éœ€è¦æ›´æ–°ä¸€æ¬¡ï¼Œä¹Ÿä¸æ˜¯é•¿æœŸæ–¹æ¡ˆã€‚Fastlane åœ¨ 2.160.0 ç‰ˆæœ¬å¼€å§‹æ”¯æŒ Apple çš„ App Store Connect API åŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½ç”±è‹¹æœæä¾›ï¼Œç”¨äºå¤„ç†ç™»å½• App Store Connect çš„æˆæƒé—®é¢˜ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š

1ã€åœ¨[è¿™é‡Œ](https://appstoreconnect.apple.com/access/shared-secret)åˆ›å»ºå…±äº«ç§˜é’¥ã€‚

è¯·æ±‚æƒé™ï¼š

![](https://gitee.com/zhangferry/Images/raw/master/iOSWeeklyLearning/1_request_access-2.png)

åˆ›å»ºç§˜é’¥ï¼š

![](https://gitee.com/zhangferry/Images/raw/master/iOSWeeklyLearning/2_create_key-1.png)

è¿™é‡Œçš„ `.p8` ç§˜é’¥æ–‡ä»¶åªèƒ½ä¸‹è½½ä¸€æ¬¡ï¼Œæ³¨æ„ä¿å­˜ã€‚

2ã€fastfile çš„é…ç½®ã€‚

å¯ä»¥ç›´æ¥ç”¨`app_store_connect_api_key`å¯¹è±¡é…ç½®ï¼Œä¹Ÿå¯ä»¥å†™æˆ json ä¾›å¤šä¸ª `lane` å…±äº«ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ json å½¢å¼ç®¡ç†ï¼Œæ–°å»ºä¸€ä¸ªjsonæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹å†…å®¹ï¼š

```json
{
  "key_id": "D383SF739",
  "issuer_id": "6053b7fe-68a8-4acb-89be-165aa6465141",
  "key": "-----BEGIN PRIVATE KEY-----\nMIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHknlhdlYdLu\n-----END PRIVATE KEY-----",
  "duration": 1200, # optional (maximum 1200)
  "in_house": false # optional but may be required if using match/sigh
}
```

å‰é¢ä¸‰é¡¹éƒ½æ˜¯å¯¹ç§˜é’¥æ–‡ä»¶çš„æè¿°ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„é¡¹ç›®è¿›è¡Œä¿®æ”¹ã€‚è¿™é‡Œéœ€ä¸»è¦`key`çš„å†…å®¹ï¼ŒåŸå§‹`.p8`æ–‡ä»¶æ˜¯å¸¦æ¢è¡Œçš„ï¼Œè½¬æˆå­—ç¬¦ä¸²æ—¶ç”¨`\n`è¡¨ç¤ºæ¢è¡Œã€‚æ³¨æ„è¿™é‡Œçš„å€¼ä¸º`key`ï¼Œå®˜ç½‘å†™æ³•æ˜¯`key_content`ï¼Œè¿™æ˜¯å®˜ç½‘çš„é”™è¯¯ï¼Œæˆ‘å¼€å§‹ä¹Ÿè¢«å‘äº†ï¼Œå·²ç»æœ‰äººæå‡ºäº† [issues 19341](https://github.com/fastlane/fastlane/issues/19341 "issues 19341")ã€‚

åŸºæœ¬æ‰€æœ‰éœ€è¦ç™»å½• app conenct çš„å‘½ä»¤éƒ½åŒ…å« api_key_path è¿™ä¸ªå‚æ•°ï¼Œä¼ å…¥ json æ–‡ä»¶è·¯å¾„å³å¯ï¼š

```json
lane :release do
  pilot(api_key_path: "fastlane/D383SF739.json" )
end
```

å‚è€ƒï¼š[fastlane app-store-connect-api documents](https://docs.fastlane.tools/app-store-connect-api/ "app-store-connect-api documents")

## é¢è¯•è§£æ

æ•´ç†ç¼–è¾‘ï¼š[å¸ˆå¤§å°æµ·è…¾](https://juejin.cn/user/782508012091645/posts)

## ä¼˜ç§€åšå®¢

æ•´ç†ç¼–è¾‘ï¼š[çš®æ‹‰å¤«å¤§ç‹åœ¨æ­¤](https://www.jianshu.com/u/739b677928f7)ã€[æˆ‘æ˜¯ç†Šå¤§](https://juejin.cn/user/1151943916921885)

1ã€[æ·±å…¥æµ…å‡º Apple å“åº”å¼æ¡†æ¶ Combine](https://www.infoq.cn/article/eaq01u5jevuvqfghlqbs "æ·±å…¥æµ…å‡º Apple å“åº”å¼æ¡†æ¶ Combine") -- æ¥è‡ªInfoQï¼šé’èŠ±ç“·çš„å¹³æ–¹

[@æˆ‘æ˜¯ç†Šå¤§](https://juejin.cn/user/1151943916921885)ï¼šæœ¬æ–‡æ˜¯Joseph Heckç¼–å†™çš„æ•™ç¨‹çš„ä¸­æ–‡ç‰ˆæœ¬ï¼Œé€‚åˆæ–°æ‰‹é˜…è¯»ï¼Œå­¦ä¹ Combineã€‚

2ã€[Combine debugging using operators in Swift](https://www.avanderlee.com/swift/combine-error-handling/ "Combine debugging using operators in Swift") -- æ¥è‡ªåšå®¢ï¼šavanderlee

[@æˆ‘æ˜¯ç†Šå¤§](https://juejin.cn/user/1151943916921885)ï¼šä½¿ç”¨RxSwiftä¼šäº§ç”Ÿå¤§é‡çš„ä¸å¯è¯»å †æ ˆä¿¡æ¯ï¼Œè¿™ä¹Ÿæ˜¯å¼€å‘äººå‘˜æ”¾å¼ƒRxSwiftçš„åŸå› ä¹‹ä¸€,åœ¨Combineä¸­è¿™ä¸€ç‚¹ä¾æ—§å¦‚æ­¤ã€‚ä½†å¥½åœ¨æœ‰ä¸€äº›æç¤ºå’ŒæŠ€å·§å¯ä»¥æ”¹å–„ï¼Œæœ¬æ–‡å°±ä»‹ç»äº†å‡ ç§æ–¹å¼ã€‚

3ã€[Combine: Getting Started](https://www.raywenderlich.com/7864801-combine-getting-started#toc-anchor-011 "Combine: Getting Started")  -- æ¥è‡ªï¼šraywenderlich

[@æˆ‘æ˜¯ç†Šå¤§](https://juejin.cn/user/1151943916921885)ï¼šSwift Combineçš„ç¡¬æ ¸æ•™ç¨‹ï¼Œä½œè€…åˆ©ç”¨UnsplashAPIå¸¦å¤§å®¶å®ç°äº†ä¸€ä¸ªç®€æ˜“çš„Appï¼Œè®©æˆ‘ä»¬å­¦ä¹ äº†è§£å¦‚ä½•ä½¿ç”¨ Combine çš„å‘å¸ƒè€…å’Œè®¢é˜…è€…æ¥å¤„ç†äº‹ä»¶æµã€åˆå¹¶å¤šä¸ªå‘å¸ƒè€…ç­‰ã€‚

4ã€[Combine - ä»‹ç»ã€æ ¸å¿ƒæ¦‚å¿µ](https://zhuanlan.zhihu.com/p/154621268 "Combine - ä»‹ç»ã€æ ¸å¿ƒæ¦‚å¿µ") -- æ¥è‡ªçŸ¥ä¹ï¼šTalaxy

[@çš®æ‹‰å¤«å¤§ç‹](https://www.jianshu.com/u/739b677928f7)ï¼šæåˆ°å“åº”å¼ç¼–ç¨‹å°±ä¸å¾—ä¸è¯´Combineã€‚è¿™ç¯‡æ–‡ç« ä»‹ç»äº†Combine çš„ç›¸å…³æ¦‚å¿µå’Œç”¨æ³•ã€‚åŒ…æ‹¬å‘å¸ƒè€…-è®¢é˜…è€…çš„ç”Ÿå‘½å‘¨æœŸã€å‘å¸ƒè€…è®¢é˜…è€…æ“ä½œè€…çš„æ¦‚å¿µç­‰ç­‰ã€‚

5ã€[Apple å®˜æ–¹å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶ï¼šSwift Combine åº”ç”¨](https://nemocdz.github.io/post/apple-å®˜æ–¹å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶swift-combine-åº”ç”¨/ "Apple å®˜æ–¹å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶ï¼šSwift Combine åº”ç”¨") -- æ¥è‡ªï¼šNemocdz's Blog

[@çš®æ‹‰å¤«å¤§ç‹](https://www.jianshu.com/u/739b677928f7)ï¼šæœ¬æ–‡é€šè¿‡ä¾‹å­å’Œä»£ç ä»‹ç»äº†Combineçš„ç”¨æ³•ï¼Œé€‚åˆäº†è§£Combineç›¸å…³æ¦‚å¿µå’ŒåŸºç¡€çš„åŒå­¦é˜…è¯»ã€‚


6ã€[RxSwift to Combine Cheatsheet](https://github.com/CombineCommunity/rxswift-to-combine-cheatsheet "RxSwift to Combine Cheatsheet") -- æ¥è‡ªGitHubï¼šCombineCommunity

[@çš®æ‹‰å¤«å¤§ç‹](https://www.jianshu.com/u/739b677928f7)ï¼šRxSwift ä¸ Combine çš„å¯¹ç…§å…³ç³»ï¼Œå¦‚æœä½ æƒ³ä»RxSwiftè¿‡æ¸¡åˆ°Combineï¼Œå¯ä»¥å‚è€ƒæ­¤æ–‡ç« ã€‚

## å­¦ä¹ èµ„æ–™

æ•´ç†ç¼–è¾‘ï¼š[Mimosa](https://juejin.cn/user/1433418892590136)

## å·¥å…·æ¨è

æ•´ç†ç¼–è¾‘ï¼š[zhangferry](https://zhangferry.com)

## å…³äºæˆ‘ä»¬

iOS æ‘¸é±¼å‘¨æŠ¥ï¼Œä¸»è¦åˆ†äº«å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ç»éªŒæ•™è®­ã€ä¼˜è´¨çš„åšå®¢ã€é«˜è´¨é‡çš„å­¦ä¹ èµ„æ–™ã€å®ç”¨çš„å¼€å‘å·¥å…·ç­‰ã€‚å‘¨æŠ¥ä»“åº“åœ¨è¿™é‡Œï¼šhttps://github.com/zhangferry/iOSWeeklyLearning ï¼Œå¦‚æœä½ æœ‰å¥½çš„çš„å†…å®¹æ¨èå¯ä»¥é€šè¿‡ issue çš„æ–¹å¼è¿›è¡Œæäº¤ã€‚å¦å¤–ä¹Ÿå¯ä»¥ç”³è¯·æˆä¸ºæˆ‘ä»¬çš„å¸¸é©»ç¼–è¾‘ï¼Œä¸€èµ·ç»´æŠ¤è¿™ä»½å‘¨æŠ¥ã€‚å¦å¯å…³æ³¨å…¬ä¼—å·ï¼šiOSæˆé•¿ä¹‹è·¯ï¼Œåå°ç‚¹å‡»è¿›ç¾¤äº¤æµï¼Œè”ç³»æˆ‘ä»¬ï¼Œè·å–æ›´å¤šå†…å®¹ã€‚

### å¾€æœŸæ¨è

[iOSæ‘¸é±¼å‘¨æŠ¥ ç¬¬äºŒåå…­æœŸ](https://mp.weixin.qq.com/s/PnUZLoyKr8i_smi0H-pQgQ)

[iOSæ‘¸é±¼å‘¨æŠ¥ ç¬¬äºŒåäº”æœŸ](https://mp.weixin.qq.com/s/LLwiEmezRkXHVk66A6GDlQ)

[iOSæ‘¸é±¼å‘¨æŠ¥ ç¬¬äºŒåå››æœŸ](https://mp.weixin.qq.com/s/vXyD_q5p2WGdoM_YmT-iQg)

[iOSæ‘¸é±¼å‘¨æŠ¥ ç¬¬äºŒåä¸‰æœŸ](https://mp.weixin.qq.com/s/1Vs50Lbo0Z27dnU-ARQ96A)

![](https://gitee.com/zhangferry/Images/raw/master/iOSWeeklyLearning/WechatIMG384.jpeg)
