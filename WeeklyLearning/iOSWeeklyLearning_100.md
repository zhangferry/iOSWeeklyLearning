# iOS æ‘¸é±¼å‘¨æŠ¥ #100 | æœ€åä¸€æœŸ

![](https://cdn.zhangferry.com/Images/moyu_weekly_cover.jpeg)

### æœ¬æœŸæ¦‚è¦

> * æœ¬æœŸè¯é¢˜ï¼šå…³äºæ‘¸é±¼å‘¨æŠ¥çš„è¿è¥æ„Ÿå—ï¼Œè¿™æ˜¯æœ€åä¸€æœŸ
> * æœ¬å‘¨å­¦ä¹ ï¼šXcode ä¸­æ›´å¥½çš„å¼‚å¸¸æç¤º
> * å†…å®¹æ¨èï¼š String Catalogsã€è‡ªå®šä¹‰å­—ä½“åŠ è½½ã€HTTP ç±»å‹ã€å•å‘æ•°æ®æµã€æ„å»ºç±» Facetime åº”ç”¨ç­‰å†…å®¹
> * æ‘¸ä¸€ä¸‹é±¼ï¼šä¸æ¢è´¦å·åˆ‡æ¢ App Store å•†åº—å†…å®¹ï¼›åå¸ Tusi.Artï¼›Swift AST å¯è§†åŒ–å±•ç¤ºç½‘ç«™ï¼›å¼€æºçš„ AI è§’è‰²æ¨¡æ‹Ÿæ¡†æ¶ RealCharï¼›ä¸€ä»½å°å†Œï¼šã€Œç²¾ç›Šå‰¯ä¸šï¼šç¨‹åºå‘˜å¦‚ä½•ä¼˜é›…åœ°åšå‰¯ä¸šã€

## æœ¬æœŸè¯é¢˜

### æœ€åä¸€æœŸæ‘¸é±¼å‘¨æŠ¥

ä¸çŸ¥ä¸è§‰æ‘¸é±¼å‘¨æŠ¥å·²ç»åšåˆ°ç¬¬ 100 æœŸäº†ã€‚ä»å…¬ä¼—å·åå°çœ‹ç¬¬ 99 æœŸåˆ°ç¬¬ 1 æœŸçš„å˜åŒ–ï¼Œæ‰¾åˆ°ç¬¬äºŒæœŸå‘¨æŠ¥ä¸€ä½è¯»è€…çš„ç•™è¨€ï¼š

![](https://cdn.zhangferry.com/Images/202307192337354.png)

å½“æ—¶å¾ˆå—é¼“èˆï¼Œä½†ç¡®å®æ²¡æƒ³è¿‡è¦åšå¤šä¹…ï¼Œ100 æœŸæ˜¯ä¸€ä¸ªå¾ˆç„å¹»çš„ç›®æ ‡ã€‚ä½†ä»é‚£å¼€å§‹å‘½è¿çš„é½¿è½®å¼€å§‹è½¬åŠ¨ï¼Œä¸¤å¹´åŠä¹‹åï¼Œç«Ÿç„¶çœŸçš„åšåˆ°äº† 100 æœŸã€‚é€šè¿‡åå°æ•°æ®èƒ½å¤§è‡´åˆ†æå‡ºå‘¨æŠ¥çš„ä¸€äº›å˜åŒ–ï¼Œå‰ä¸­æœŸé˜…è¯»é‡å’Œäº’åŠ¨é‡éƒ½è¿˜ä¸é”™ï¼Œåˆ°äº†è¿‘æœŸåè€Œæœ‰äº›ä¸‹æ»‘ã€‚å¯èƒ½æ˜¯é€‰é¢˜ä¸Šçš„å·®å¼‚ï¼Œä¹Ÿå¯èƒ½æ˜¯å—ä¼—çš„å˜åŒ–ï¼Œå‘¨æŠ¥çš„è¿ä½œä¼¼ä¹ä¹Ÿè¾¾åˆ°äº†ä¸€ç§éš¾ä»¥çªç ´çš„ç“¶é¢ˆã€‚

å°±æˆ‘æœ¬èº«æ¥è¯´å‘¢ï¼Œå·¥ä½œä¸Šæœ‰å¾ˆå¤šäº‹æƒ…éœ€è¦æ›´å…¨é¢çš„è§„åˆ’ï¼Œå­—èŠ‚å†…éƒ¨ä¹Ÿæœ‰å¾ˆå¤šä¸œè¥¿æƒ³è¦æ·±å…¥äº†è§£ï¼›ä¸šä½™æ—¶é—´æœ€è¿‘å¯¹ AIã€å‰åç«¯æŠ€æœ¯å…´è¶£æ¯”è¾ƒå¤§ï¼Œå·²ç»åˆ—äº†å¥½å‡ ä¸ªæ”¯çº¿ä»»åŠ¡ï¼Œéƒ½è¿˜æ˜¯å¾…å®ŒæˆçŠ¶æ€ï¼›å®¶åº­æ–¹é¢ï¼Œéšç€å­©å­çš„æˆé•¿ï¼Œä¹Ÿæƒ³ç»™å¥¹æ›´å¤šçš„é™ªä¼´ï¼Œæœ€è¿‘ä¹Ÿéƒ½å°½é‡æ—©ç‚¹ä¸‹ç­é™ªå­©å­ã€‚ä½†æ˜¯å‘¢ï¼Œæ—¶é—´æ˜¯æœ‰é™çš„ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹çš„æŠ•å…¥æ›´å¤šå°±æ„å‘³ç€å¦ä¸€ä¸ªåœ°æ–¹å°±è¦å‡å°‘ï¼Œæœ€è¿‘åŠå¹´éƒ½æ²¡å’‹æ‰“å¼€åŸç¥äº†ã€‚

æ‰€ä»¥æ‘¸é±¼å‘¨æŠ¥è¿˜è¦ä¸è¦åšä¸‹å»ï¼Œå°±å˜æˆäº†ä¸€ä¸ªéœ€è¦è¡¡é‡ ROI çš„äº‹æƒ…äº†ã€‚æ—©æœŸçš„æ”¶è·æ›´å¤šæ˜¯å®šæœŸè¾“å‡ºçš„ä¹ æƒ¯åŸ¹å…»ã€å…¬ä¼—å·è¿è¥ã€ä¸è¯»è€…çš„äº’åŠ¨ã€è®¤è¯†æ›´å¤šçš„æœ‹å‹ç­‰ç­‰ï¼Œç°åœ¨å‘¢ï¼Œè€ƒè™‘åˆ°æ—¶é—´æˆæœ¬ï¼Œè¿™äº›éƒ½ä¸è¶³ä»¥å†æ”¯æ’‘æˆ‘æœ‰å·¨å¤§çš„çƒ­æƒ…æ¥ç»§ç»­ææ‘¸é±¼å‘¨æŠ¥äº†ã€‚è¿™ä¸ªå†³å®šä¹Ÿæƒ³è¿‡å¾ˆä¹…äº†ï¼Œ100 æ˜¯ä¸€ä¸ªå¾ˆå®Œç¾çš„æ•°å­—ï¼Œæ‘¸é±¼å‘¨æŠ¥å°±åœç•™åœ¨è¿™ä¸€æœŸå§ã€‚

æ„Ÿè°¢ä¸€ç›´ä»¥æ¥æ”¯æŒæ‘¸é±¼å‘¨æŠ¥çš„ç¼–è¾‘ä»¬ï¼Œç‰¹åˆ«æ˜¯è‚˜å­ï¼Œä¸æ˜¯ä»–çš„å¸®åŠ©å¯èƒ½ 100 æœŸéƒ½åšä¸åˆ°ï¼›ä¹Ÿæ„Ÿè°¢å„ä½é™ªä¼´çš„è¯»è€…ï¼Œè¢«äººå…³æ³¨ï¼Œè¢«äººæœŸå¾…çš„æ„Ÿè§‰å¾ˆç¾å¥½ï¼Œè¿™äº›éƒ½æ˜¯ä½ ä»¬ç»™çš„ï¼Œå¸Œæœ›å¤§å®¶æ‹¥æœ‰æ›´å¤šè¿™æ ·çš„ç»å†ã€‚åé¢ä¹Ÿè¿˜æ˜¯ä¼šç»§ç»­è¾“å‡ºä¸€äº›å†…å®¹ï¼Œåªä¸è¿‡å¯†åº¦ä¼šå°ä¸€äº›ï¼Œæœ€åä¸€æœŸï¼Œå¤§å®¶ç»§ç»­äº«ç”¨å§ã€‚

## æœ¬å‘¨å­¦ä¹ 

æ•´ç†ç¼–è¾‘ï¼š[zhangferry](https://zhangferry.com)

### ç»™ä»£ç å¼‚å¸¸æä¾›æ›´ä¸æ»‘çš„æé†’æ–¹å¼

åœ¨å¹³å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¸€äº›éé¢„æœŸçš„è¡Œä¸ºï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ `assert`æˆ–è€… `fatalError`é™„åŠ ä¸€äº›ä¿¡æ¯ï¼Œå¹¶ä¸­æ–­ç¨‹åºæ¥æé†’å¼€å‘è€…æ³¨æ„è¿™ç±»å¼‚å¸¸ã€‚ä½†å®ƒæœ€å¤§çš„é—®é¢˜åœ¨äºè§¦å‘æ­¤ç±»è¯­å¥ï¼Œç¨‹åºä¼šç«‹å³å´©æºƒï¼Œé™¤äº†å¼‚å¸¸è¯­å¥æä¾›çš„ä¿¡æ¯ï¼Œä»€ä¹ˆéƒ½è·å–ä¸åˆ°çš„ï¼Œæƒ³è·Ÿè¿›ä¸€äº›æ‰§è¡Œçš„ä¸Šä¸‹æ–‡æ—¶ä¹Ÿå˜å¾—ä¸å¯èƒ½ï¼Œé‚£è¿™ç§è¡Œä¸ºé™¤äº†å¢åŠ å¼€å‘é˜»å¡æ„Ÿå°±æ²¡æœ‰å…¶ä»–ä»»ä½•ç›Šå¤„äº†ã€‚è¿™é‡Œä»‹ç»ä¸¤ç§ç›¸å¯¹ä¸é‚£ä¹ˆç”Ÿç¡¬ï¼Œè¿˜èƒ½èµ·åˆ°æ¯”è¾ƒç›´æ¥æé†’çš„å½¢å¼ã€‚åé¢å†…å®¹å‚è€ƒè‡ª [Unobtrusive runtime warnings for libraries](https://www.pointfree.co/blog/posts/70-unobtrusive-runtime-warnings-for-libraries "Unobtrusive runtime warnings for libraries")ã€‚

**æ–­ç‚¹æé†’**

å°±æ˜¯ç¨‹åºè¿è¡Œåˆ°æ­¤å¤„æ—¶ï¼Œä¸å†å´©æºƒï¼Œå–è€Œä»£ä¹‹æ˜¯ä¸€ä¸ªè‡ªåŠ¨çš„æ–­ç‚¹ï¼Œä½ å¯ä»¥é€‰æ‹©è°ƒè¯•ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç»§ç»­æ‰§è¡Œã€‚ä¸»è¦é€»è¾‘æ˜¯å‘è¿è¡Œçš„è¿›ç¨‹å‘é€ SIGTRAP ä¿¡å·ï¼š

```swift
raise(SIGTRAP)
```

å®ƒç”Ÿæ•ˆçš„å‰ææ˜¯å½“å‰ç¨‹åºå·²ç»è¢« LLDB attach äº†ï¼ŒSIGTRAP å…¨åæ˜¯ "Trace/breakpoint trap"ï¼Œå®ƒæ˜¯ POSIX æ ‡å‡†å®šä¹‰ä¸‹çš„ä¿¡å·ä¹‹ä¸€ã€‚è¿™ä¸ªä¿¡å·çš„é»˜è®¤æ“ä½œæ˜¯è®©è¿›ç¨‹åœæ­¢æ‰§è¡Œï¼Œå¹¶è¿›å…¥æ–­ç‚¹åœæ­¢çŠ¶æ€ã€‚`raise(SIGTRAP) `å°±æ˜¯å‘å½“å‰è¿›ç¨‹å‘é€ SIGTRAP ä¿¡å·ï¼Œä½¿å…¶è¿›å…¥æ–­ç‚¹åœæ­¢çŠ¶æ€ã€‚å¦‚æœè¦è·³è¿‡æ–­ç‚¹ï¼Œè¾“å…¥ "c"ï¼Œæˆ–ç‚¹å‡»è·³è¿‡æ–­è¨€æŒ‰é’®éƒ½å¯ä»¥ã€‚

![](https://cdn.zhangferry.com/Images/202307200921665.png)

å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```swift
@inline(__always) func breakpoint(_ message: @autoclosure () -> String = "") {
  #if DEBUG
    var name = [CTL_KERN, KERN_PROC, KERN_PROC_PID, getpid()]
    var info = kinfo_proc()
    var info_size = MemoryLayout<kinfo_proc>.size

    let isDebuggerAttached = sysctl(&name, 4, &info, &info_size, nil, 0) != -1
      && info.kp_proc.p_flag & P_TRACED != 0

    if isDebuggerAttached {
      fputs(
        """
        \(message())

        Caught debug breakpoint. Type "continue" ("c") to resume execution.

        """,
        stderr
      )
      raise(SIGTRAP)
    }
  #endif
}
```

è¿™ä¸ªæ–¹æ¡ˆçš„é—®é¢˜åœ¨äºæ–­ç‚¹çš„ä½ç½®æ— æ³•æ§åˆ¶ï¼Œå¯èƒ½ä¼šè®©äººç–‘æƒ‘ã€‚

**issue æé†’**

Xcode ä¼šé»˜è®¤å¼€å¯ä¸»çº¿ç¨‹æ£€æŸ¥ï¼Œå°±æ˜¯éä¸»çº¿ç¨‹æ“ä½œ UI ä¼šè¢«è¯†åˆ«åˆ°å¹¶ä»¥ä¸€ç§ç´«è‰²çš„æé†’å±•ç¤ºå‡ºæ¥ï¼Œå®ƒä¸ä¼šæ‰“æ–­ç¨‹åºæ‰§è¡Œï¼Œä»…ä»…ç”¨äºå±•ç¤ºã€‚

![](https://cdn.zhangferry.com/Images/202307202210465.png)

è¿™ç§èƒ½åŠ›å…¶å®ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œæœ‰ä¸€ç§æ–¹æ¡ˆæ˜¯é€šè¿‡å‡½æ•°åœ°å€å»è°ƒç”¨ `__main_thread_checker_on_report`ï¼Œä½†å› ä¸ºå®ƒå±•ç¤ºçš„åˆ†ç±»è¿˜æ˜¯ Main Thread Chekerï¼Œæ•ˆæœä¸å¤ªå¥½ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆæ˜¯é€šè¿‡ os_logï¼Œè¿™ç§å½¢å¼ç›¸å¯¹ trickï¼Œè®°å¾—æŠŠå®ƒé™å®šåœ¨ DEBUG ç¯å¢ƒä¸‹ã€‚

```swift

// os_log å®šä¹‰
@available(macOS 10.14, iOS 12.0, watchOS 5.0, tvOS 12.0, *)
public func os_log(_ type: OSLogType, dso: UnsafeRawPointer = #dsohandle, log: OSLog = .default, _ message: StaticString, _ args: CVarArg...)

// os_log ä½¿ç”¨
os_log(
  .fault, // æ—¥å¿—ç±»å‹ï¼Œæœ‰ï¼šdefault, info, debug, error, fault
  dso: <UnsafeRawPointer>,
  log: OSLog(
    subsystem: "com.apple.runtime-issues", // å¯å›ºå®š
    category: "CustomXcodeIssue" // æ—¥å¿—ç±»åˆ«
  ),
  "We encountered a runtime warning" // éœ€è¦è‡ªå®šä¹‰å±•ç¤ºçš„æ—¥å¿—ä¿¡æ¯
)
```

è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå‚æ•°æ²¡æœ‰å¡«ï¼Œå°±æ˜¯è¿™ä¸ª `dso`ï¼Œå®ƒå¯¹åº”çš„æ˜¯ä¸€ä¸ªç³»ç»ŸåŠ¨æ€åº“çš„åŸºå€ï¼Œè€Œä¸”å®ƒè¿˜ä¸æ˜¯éšä¾¿ä¸€ä¸ªåŠ¨æ€åº“éƒ½è¡Œï¼Œå“ªè°å¯ä»¥å‘¢ï¼Œæ–‡ç« ä¸­ç”¨çš„æ˜¯ SwiftUIï¼Œä½†é SwiftUI é¡¹ç›®å›æ¥åŠ è½½è¿™ä¸ªåº“ï¼Œæµ‹è¯•å‘ç° Foundation ä¹Ÿæ˜¯å¯ä»¥ã€‚è·å– Foundation çš„åŸºåœ°å€æœ‰ä¸¤ç§æ–¹å¼ï¼š

* é€šè¿‡ `nm` è·å–ä¸€ä¸ª Foundation é‡Œçš„ç¬¦å·ï¼Œç„¶åé€šè¿‡ `dladdr` è·å–åº“çš„åŸºå€¼ï¼š

  ```swift
  var info = Dl_info()
  dladdr(
    dlsym(
      dlopen(nil, RTLD_LAZY), "+[NSBundle allBundles]" // Foundation å†…éƒ¨ç¬¦å·
    ),
    &info
  )
  // info.dli_fbase å°±æ˜¯è¿™ä¸ªåŸºå€
  ```

* é€šè¿‡æ£€æµ‹æ‰€æœ‰éœ€è¦åŠ è½½çš„åŠ¨æ€åº“ï¼Œæ ¹æ®åŠ è½½åœ°å€åˆ¤æ–­å‡º Foundationï¼š

  ```swift
  let count = _dyld_image_count()
  for i in 0..<count {
    guard let name = _dyld_get_image_name(i),
      String(cString: name).hasSuffix("/Foundation"),
      let header = _dyld_get_image_header(i) else {
        continue
    }
    // headerå¯¹åº”çš„å°±æ˜¯åŸºåœ°å€
  }
  ```

ä¸ºäº†è®©æç¤ºèƒ½å¤Ÿåœç•™åœ¨æˆ‘ä»¬çš„è°ƒç”¨çš„åœ°æ–¹ï¼Œè¿˜éœ€è¦ç»™æ—¥å¿—å‡½æ•°åŠ ä¸Šå†…è”ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š

![](https://cdn.zhangferry.com/Images/202307221459902.png)

å®Œæ•´ä»£ç ï¼š

```swift
@_transparent
@inline(__always)
func runtimeWarning(
  _ message: @autoclosure () -> StaticString,
  _ args: @autoclosure () -> [CVarArg] = []
) {
  #if DEBUG
    let message = message()
    let log = OSLog(subsystem: "com.apple.runtime-issues", category: "CustomXcodeIssue")
    struct DSOFinder {
        static let dso: UnsafeMutableRawPointer = {
          let count = _dyld_image_count()
          for i in 0..<count {
              guard let name = _dyld_get_image_name(i),
                    String(cString: name).hasSuffix("/Foundation"),
                    let header = _dyld_get_image_header(i) else {
                  continue
              }
              return UnsafeMutableRawPointer(mutating: UnsafeRawPointer(header))
          }
          return UnsafeMutableRawPointer(mutating: #dsohandle)
        }()
      }
    
    os_log(.fault, dso: DSOFinder.dso, log: log, message, args())
  #endif
}
```

## å†…å®¹æ¨è

æ¨èè¿‘æœŸçš„ä¸€äº›ä¼˜ç§€åšæ–‡ï¼Œå†…å®¹æ¶µç›– String Catalogsã€è‡ªå®šä¹‰å­—ä½“åŠ è½½ã€HTTP ç±»å‹ã€å•å‘æ•°æ®æµã€æ„å»ºç±» Facetime åº”ç”¨ç­‰æ–¹é¢ã€‚

æ•´ç†ç¼–è¾‘ï¼š[ä¸œå¡è‚˜å­](https://www.fatbobman.com/)

1ã€[ä¸ String Catalogs æœ‰å…³çš„å¸¸è§é—®é¢˜è§£ç­”](https://www.fline.dev/the-missing-string-catalogs-faq-for-xcode-15/ "ä¸ String Catalogs æœ‰å…³çš„å¸¸è§é—®é¢˜è§£ç­”") -- ä½œè€…ï¼šCihat GÃ¼ndÃ¼z

[@ä¸œå¡è‚˜å­](https://www.fatbobman.com/): åœ¨ WWDC23 ä¸Šï¼Œè‹¹æœä¸º Xcode æ¨å‡ºäº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼šString Catalogsã€‚è¯¥åŠŸèƒ½å–ä»£äº†ä¼ ç»Ÿçš„æœ¬åœ°åŒ–æ–‡ä»¶ï¼Œç®€åŒ–äº†æœ¬åœ°åŒ–æµç¨‹ã€‚æœ¬æ–‡ä½œè€…åŒæ—¶ä¸º [RemafoX](https://remafox.app/)ï¼ˆ ä¸€ä¸ªæœ¬åœ°åŒ–å·¥å…·ï¼‰çš„å¼€å‘è€…ï¼Œä»–åœ¨ Slack activity ä¸Šä¸è‹¹æœçš„å·¥ç¨‹å¸ˆè¿›è¡Œäº†æ·±å…¥æ¢è®¨ã€‚ä½œè€…å°†é€šè¿‡é—®é¢˜è§£ç­”çš„å½¢å¼å¯¹ String Catalogs è¿›è¡Œè¯´æ˜ï¼Œä»¥å¸®åŠ©å¼€å‘è€…äº†è§£ä¸ºä»€ä¹ˆåº”è¯¥å¯¹ Xcode 15 ä¸­çš„è¿™ä¸ªå¼ºå¤§å·¥å…·æ„Ÿåˆ°å…´å¥‹ã€‚

2ã€[ä½¿ç”¨ Swift Package æ’ä»¶å°†è‡ªå®šä¹‰å­—ä½“åŠ è½½åˆ°åº”ç”¨ç¨‹åºä¸­](https://www.polpiella.dev/load-custom-fonts-with-no-code-using-swift-package-plugins/ "ä½¿ç”¨ Swift Package æ’ä»¶å°†è‡ªå®šä¹‰å­—ä½“åŠ è½½åˆ°åº”ç”¨ç¨‹åºä¸­") -- ä½œè€…ï¼šPol Piella Abadia

[@ä¸œå¡è‚˜å­](https://www.fatbobman.com/): å¦‚æœä½ å‘ç°è‡ªå·±ä¸€éåˆä¸€éåœ°ä½¿ç”¨ç›¸åŒçš„å­—ä½“ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘æ˜¯å¦éœ€è¦åˆ›å»ºä¸€ä¸ª Swift Package æ¥åŒ…å«å…±äº«çš„å­—ä½“æ–‡ä»¶å’Œå­—ä½“åŠ è½½ä»£ç ã€‚è¿™æ ·å¯ä»¥æ›´å¿«åœ°åˆ›å»ºæ–°çš„åº”ç”¨ç¨‹åºï¼Œé€šè¿‡ä¸€ä¸ªå•ä¸€çš„åœ°æ–¹æ¥æ›´æ–°æ‰€æœ‰åº”ç”¨ç¨‹åºçš„å­—ä½“æ–‡ä»¶ï¼Œå¹¶å‡å°‘ä»£ç é‡å¤ã€‚æœ¬æ–‡ä½œè€…å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ [SwiftGen](https://github.com/SwiftGen/SwiftGen) æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œè®©ä½ çš„åº”ç”¨ç¨‹åºæ›´åŠ é«˜æ•ˆå’Œå¯ç»´æŠ¤ã€‚

3ã€[ä»‹ç» Swift HTTP ç±»å‹](https://www.swift.org/blog/introducing-swift-http-types/ "ä»‹ç» Swift HTTP ç±»å‹") -- ä½œè€…ï¼šGuoye Zhangã€Eric Kinnearã€Cory Benfield

[@ä¸œå¡è‚˜å­](https://www.fatbobman.com/): Swift ç¤¾åŒºåˆšåˆšå‘å¸ƒäº†ä¸€ä¸ªåä¸º [Swift HTTP Types](https://github.com/apple/swift-http-types) çš„å¼€æºè½¯ä»¶åŒ…ï¼Œé€šè¿‡ HTTPRequest å’Œ HTTPResponse æä¾›äº† HTTP æ¶ˆæ¯çš„æ ¸å¿ƒæ„å»ºå—çš„é€šç”¨è¡¨ç¤ºã€‚åœ¨é¡¹ç›®ä¸­é‡‡ç”¨è¿™äº›ç±»å‹ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å…±äº«æ›´å¤šçš„ä»£ç ï¼Œä»è€Œå‡å°‘åœ¨ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢çš„æˆæœ¬ã€‚Swift ç¤¾åŒºçš„æœ€ç»ˆç›®æ ‡æ˜¯ä½¿ç”¨ Swift HTTP Types æ›¿æ¢ SwiftNIO çš„ HTTPRequestHead å’Œ HTTPResponseHeadï¼Œä»¥åŠ Foundation çš„ URLRequest å’Œ URLResponse ä¸­çš„ HTTP æ¶ˆæ¯ä¿¡æ¯ã€‚

4ã€[å•å‘æ•°æ®æµ](https://swiftwithmajid.com/2023/07/11/unidirectional-flow-in-swift/ "å•å‘æ•°æ®æµ") -- ä½œè€…ï¼šMajid

[@ä¸œå¡è‚˜å­](https://www.fatbobman.com/): Majid å†™è¿‡å¾ˆå¤šå…³äº SwiftUI æ•°æ®æµçš„æ–‡ç« ï¼Œåˆ†äº«äº†ä»–åœ¨è¯¥é¢†åŸŸçš„çµæ„Ÿå’Œæƒ³æ³•ã€‚è¿™äº›æƒ³æ³•ç»è¿‡å¤šå¹´åº”ç”¨ç¨‹åºæ„å»ºçš„å®è·µï¼Œæœ€ç»ˆäº§ç”Ÿäº†ä¸€ä¸ªåä¸º [swift-unidirectional-flow](https://github.com/mecid/swift-unidirectional-flow) çš„ Swift è½¯ä»¶åŒ…ã€‚è¯¥è½¯ä»¶åŒ…å®ç°äº† Majid æ‰€æœ‰çš„æƒ³æ³•ï¼Œå¹¶è¢«ç”¨äºä»–çš„é¡¹ç›®ä¸­ï¼Œæ”¯æŒå¹¶å‘ä»¥åŠæ„å»ºå®é™…åº”ç”¨æ‰€éœ€çš„å…¶ä»–åŠŸèƒ½ï¼ˆå¦‚å¯é¢„æµ‹ã€å¯é¢„è§ˆã€å¯è°ƒè¯•ã€æ¨¡å—åŒ–ï¼‰ã€‚ä½†æ˜¯ï¼ŒMajid å¹¶ä¸å»ºè®®å¼€å‘è€…ç›´æ¥ä½¿ç”¨è¯¥è½¯ä»¶åŒ…ã€‚ä»–è®¤ä¸ºï¼Œå¼€å‘è€…ä¸åº”è¯¥å¯¼å…¥ä»»ä½•ç¬¬ä¸‰æ–¹åº“æˆ–æ¡†æ¶æ¥æ„å»ºåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒåŠŸèƒ½ã€‚ä½ å¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºçµæ„Ÿï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­æ ¹æ®ä½ çš„éœ€æ±‚æ„å»ºçŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚

5ã€[æµå¼è§†é¢‘é€šè¯ï¼šå¦‚ä½•ä½¿ç”¨ SwiftUI æ„å»ºç±»ä¼¼ FaceTime çš„åº”ç”¨](https://getstream.io/blog/facetime-clone/ "æµå¼è§†é¢‘é€šè¯ï¼šå¦‚ä½•ä½¿ç”¨ SwiftUI æ„å»ºç±»ä¼¼ FaceTime çš„åº”ç”¨") -- ä½œè€…ï¼šAmos G

[@ä¸œå¡è‚˜å­](https://www.fatbobman.com/): æ— è®ºé€šè¯å‚ä¸è€…èº«åœ¨ä½•å¤„ï¼Œä½¿ç”¨è‹¹æœè®¾å¤‡ï¼Œéƒ½å¯ä»¥é€šè¿‡ FaceTime åˆ›å»ºä¸€å¯¹ä¸€æˆ–ç¾¤ç»„çš„éŸ³é¢‘/è§†é¢‘é€šè¯ã€‚æœ¬æ–‡å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ SwiftUI å’Œ iOS Video SDK from Stream æ¥æ„å»ºä¸€ä¸ªç±»ä¼¼ FaceTime çš„åº”ç”¨ï¼Œä¸æœ‹å‹å’Œå®¶äººè¿›è¡Œé¢å¯¹é¢çš„èŠå¤©ã€‚æ„å»ºçš„ iOS è¯­éŸ³å’Œè§†é¢‘é€šè¯åº”ç”¨ç¨‹åºå¯ä»¥æ”¯æŒå¤šç§ç”¨ä¾‹ï¼Œä¾‹å¦‚ 1-1 é€šè¯ï¼Œç¾¤ç»„ä¼šè®®ï¼Œè¿œç¨‹åŒ»ç–—ï¼Œçº¦ä¼šå’Œä¼šè®®ç­‰ã€‚


## æ‘¸ä¸€ä¸‹é±¼

æ•´ç†ç¼–è¾‘ï¼š[zhangferry](https://zhangferry.com)

1ã€[åˆ‡æ¢ App Store]("https://as.dogged.cn")ï¼šè¦ç™»å½•ä¸åŒå›½å®¶çš„ App Store é€šå¸¸éƒ½éœ€è¦æœ‰å„ä¸ªå›½å®¶çš„ AppleID æ‰è¡Œï¼Œè¿™ä¸ªç½‘ç«™åˆ™å¯ä»¥åšåˆ°éšæ„åˆ‡æ¢ App Store å•†åŸã€‚ç”¨ iPhone ç«¯ Safari æ‰“å¼€ç½‘ç«™åœ°å€ï¼šhttps://as.dogged.cnï¼Œç‚¹å‡»å¯¹åº”çš„å›½å®¶ä¼šè·³è½¬è‡³ App Storeï¼Œå¹¶åˆ·æ–° App Store å†…å®¹ä¸ºå½“å‰å›½å®¶çš„ä¿¡æ¯ã€‚å½“ç„¶ä½ åªèƒ½æµè§ˆå•†åº—ï¼Œæ— æ³•ä¸‹è½½ã€‚

2ã€[åå¸ Tusi.Art](https://tusi.art/images/615780714069126582?post_id=616351352009977730&source_id=nz-zoFvmkkS7pfsjbX3x8xMh "åå¸ Tusi.Art")ï¼šä¸€ä¸ªå›½å†…çš„ç±» civitai ç½‘ç«™ï¼Œæœ‰ AI æ¨¡å‹å’Œ AI å›¾ç‰‡çš„åˆ†ç±»å±•ç¤ºï¼Œæˆ‘çœ‹ä¸€äº› C ç«™æœ‰åçš„ä½œè€…ä¹Ÿæœ‰åœ¨åå¸å‘å¸ƒæ¨¡å‹ã€‚è¯¥ç½‘ç«™è¿˜æä¾›äº†åœ¨çº¿ç”Ÿæˆ AI å›¾ç‰‡çš„åŠŸèƒ½ï¼Œæ¯å¤©æä¾› 100 ç®—åŠ›ï¼Œå¦‚æœéƒ½ä½¿ç”¨æ–‡ç”Ÿå›¾ + é«˜æ¸…ä¿®å¤çš„è¯ï¼Œæ¯å¤©å¯ä»¥ç™½å«– 50 å¼ å›¾ç‰‡ã€‚æœ€ä¸»è¦çš„æ˜¯æ¯”æˆ‘æœ¬åœ°è·‘çš„è¦å¿«ã€‚

![](https://cdn.zhangferry.com/Images/202307202330596.png)

3ã€[Swift AST Explorer](https://swift-ast-explorer.com/ "Swift AST Explorer")ï¼šä¸€ä¸ªæŠŠ Swift ä»£ç çš„ AST å¯è§†åŒ–å±•ç¤ºå‡ºæ¥çš„ç½‘ç«™ã€‚å¦‚ä¸‹å›¾æ˜¯ Swift ä¸­ä¸€ä¸ªæšä¸¾å£°æ˜ EnumCaseDecl çš„ç»“æ„ï¼š

![](https://cdn.zhangferry.com/Images/202307192306027.png)



4ã€[RealChar](https://github.com/Shaunwei/RealChar "RealChar")ï¼šæœ€è¿‘æ¯”è¾ƒç«çš„ä¸€ä¸ª AI é¡¹ç›®ï¼Œç±»ä¼¼ character.aiï¼Œä½†è¦æ›´ä¼˜ç§€ï¼Œå®ƒå¯ä»¥è‡ªå®šä¹‰ AI è§’è‰²çš„è¡Œä¸ºã€èƒŒæ™¯ï¼Œç”šè‡³å£°éŸ³ï¼›å¯ä»¥å®ç°è¯­éŸ³å¯¹è¯ï¼Œä¸”å®æ—¶æ€§å¾ˆé«˜ï¼Œè¯­éŸ³ä¹Ÿè®©äº¤æµè¿‡ç¨‹æ˜¾å¾—æ›´åŠ è‡ªç„¶ï¼›æä¾›å¤šç«¯æ¥å…¥èƒ½åŠ›ï¼Œç½‘é¡µã€iPhoneã€ç»ˆç«¯éƒ½å¯ä»¥ã€‚

![](https://cdn.zhangferry.com/Images/202307210016026.png)

è¿˜æœ‰æä¾›äº†ä¸€ä¸ªä½“éªŒçš„å¹³å°ï¼šhttps://realchar.ai/ï¼Œå¯èƒ½æ˜¯å£°éŸ³çš„åŠ æŒï¼Œè·Ÿè¿™é‡Œçš„ä¹”å¸ƒæ–¯äº¤æµï¼Œæ›´æ˜¾è‡ªç„¶ï¼Œå¾ˆå¥‡å¦™çš„æ„Ÿè§‰ã€‚å¯¹äº†ï¼Œä»–è¿˜èƒ½è¯´ä¸­æ–‡ğŸ˜…

![](https://cdn.zhangferry.com/Images/202307210038106.png)

5ã€[ç²¾ç›Šå‰¯ä¸šï¼šç¨‹åºå‘˜å¦‚ä½•ä¼˜é›…åœ°åšå‰¯ä¸š](https://github.com/easychen/lean-side-bussiness "ç²¾ç›Šå‰¯ä¸šï¼šç¨‹åºå‘˜å¦‚ä½•ä¼˜é›…åœ°åšå‰¯ä¸š")ï¼šå‰¯ä¸šæ˜¯ä¸€ä¸ªæ¯”è¾ƒç†æƒ³çš„å­˜åœ¨ï¼Œè¿™ç¯‡å°ä¹¦æåˆ°çš„å‡ ä¸ªå®è·µæœ‰çŸ¥è¯†ä»˜è´¹ã€ç¤¾åŒºä»˜è´¹ã€ç‹¬ç«‹äº§å“ï¼Œè¿™äº›é€‚ç”¨æ€§å·²ç»æ²¡æœ‰é‚£ä¹ˆå¼ºäº†ï¼Œèƒ½åšå‡ºæ¥çš„æ¦‚ç‡å¾ˆä½ã€‚ä½†è€ƒè™‘å‰¯ä¸šï¼ŒæŠŠä¸€ä¸ªç›®æ ‡æ‹†åˆ†ï¼Œå°è¯•åšæˆäº§å“è¿™ä»¶äº‹æœ¬èº«è¿˜æ˜¯æ¯”è¾ƒæœ‰ä»·å€¼çš„ã€‚ä½œä¸ºç¨‹åºå‘˜å¾ˆå¤šæ—¶å€™æˆ‘ä»¬äº†è§£çš„åªæ˜¯æŠ€æœ¯ç»†èŠ‚ï¼Œè€Œå®Œæˆçš„äº§å“è®¾è®¡è¿˜æœ‰å¾ˆå¤šã€‚å…¶ä¸­ä¸¾äº†ä¸€ä¸ªã€Œç¦åˆ©å•è¯ã€é¡¹ç›®çš„å•†ä¸šæ¨¡å¼ç”»å¸ƒï¼Œå¯¹äºå¤§å¤šæ•°äº§å“éƒ½å¯ä»¥é€šè¿‡ç±»ä¼¼ç¯èŠ‚è¿›è¡Œæ‹†åˆ†ã€‚

![](https://cdn.zhangferry.com/Images/202307210858883.png)

## å…³äºæˆ‘ä»¬

iOS æ‘¸é±¼å‘¨æŠ¥ï¼Œä¸»è¦åˆ†äº«å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ç»éªŒæ•™è®­ã€ä¼˜è´¨çš„åšå®¢ã€é«˜è´¨é‡çš„å­¦ä¹ èµ„æ–™ã€å®ç”¨çš„å¼€å‘å·¥å…·ç­‰ã€‚å‘¨æŠ¥ä»“åº“åœ¨è¿™é‡Œï¼šhttps://github.com/zhangferry/iOSWeeklyLearning ï¼Œå¦‚æœä½ æœ‰å¥½çš„çš„å†…å®¹æ¨èå¯ä»¥é€šè¿‡ issue çš„æ–¹å¼è¿›è¡Œæäº¤ã€‚å¦å¤–ä¹Ÿå¯ä»¥ç”³è¯·æˆä¸ºæˆ‘ä»¬çš„å¸¸é©»ç¼–è¾‘ï¼Œä¸€èµ·ç»´æŠ¤è¿™ä»½å‘¨æŠ¥ã€‚å¦å¯å…³æ³¨å…¬ä¼—å·ï¼šiOSæˆé•¿ä¹‹è·¯ï¼Œåå°ç‚¹å‡»è¿›ç¾¤äº¤æµï¼Œè”ç³»æˆ‘ä»¬ï¼Œè·å–æ›´å¤šå†…å®¹ã€‚

### å¾€æœŸæ¨è

[iOS æ‘¸é±¼å‘¨æŠ¥ #99 | èººå¹³ã€æ‘†çƒ‚ã€å¼€å¿ƒå°±å¥½](https://mp.weixin.qq.com/s/0r-ni--4jEN4pnIHVajHqg)

[iOS æ‘¸é±¼å‘¨æŠ¥ #98 | visionOS æ¨¡æ‹Ÿå™¨ä½“éªŒ](https://mp.weixin.qq.com/s/PNEYW71BfkQ2Y3n7uRdxsQ)

[iOS æ‘¸é±¼å‘¨æŠ¥ #97 | æ™ºæºå¤§ä¼šçº¿ä¸‹å‚ä¼šä½“éªŒ](https://mp.weixin.qq.com/s/6HRxZXAJcTZKGZiNX2eBYQ)

[iOS æ‘¸é±¼å‘¨æŠ¥ #96 | Vision Pro æ‰“å¼€ç©ºé—´è®¡ç®—çš„å¤§é—¨](https://mp.weixin.qq.com/s/BM3SucfO9yhQChIPbnuwrA)

![](https://cdn.zhangferry.com/Images/WechatIMG384.jpeg)
